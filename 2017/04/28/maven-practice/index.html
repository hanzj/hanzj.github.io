<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="baidu-site-verification" content="6fea7fc7276fc383ec5b2080c662f076"/>
  
  <title>maven实战 | hanzj&#39; Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="1. maven使用入门1.1. 编写POM123456789101112131415&amp;lt;project&amp;gt;    &amp;lt;modelVersion&amp;gt;4.0.0&amp;lt;/modelVersion&amp;gt;    &amp;lt;groupId&amp;gt;com.juvenxu.mvnbook&amp;lt;/groupId&amp;gt;    &amp;lt;artifactId&amp;gt;hello-world&amp;lt;/">
<meta property="og:type" content="article">
<meta property="og:title" content="maven实战">
<meta property="og:url" content="http://yoursite.com/2017/04/28/maven-practice/index.html">
<meta property="og:site_name" content="hanzj' Blog">
<meta property="og:description" content="1. maven使用入门1.1. 编写POM123456789101112131415&amp;lt;project&amp;gt;    &amp;lt;modelVersion&amp;gt;4.0.0&amp;lt;/modelVersion&amp;gt;    &amp;lt;groupId&amp;gt;com.juvenxu.mvnbook&amp;lt;/groupId&amp;gt;    &amp;lt;artifactId&amp;gt;hello-world&amp;lt;/">
<meta property="og:updated_time" content="2017-06-29T11:07:21.353Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="maven实战">
<meta name="twitter:description" content="1. maven使用入门1.1. 编写POM123456789101112131415&amp;lt;project&amp;gt;    &amp;lt;modelVersion&amp;gt;4.0.0&amp;lt;/modelVersion&amp;gt;    &amp;lt;groupId&amp;gt;com.juvenxu.mvnbook&amp;lt;/groupId&amp;gt;    &amp;lt;artifactId&amp;gt;hello-world&amp;lt;/">
  
    <link rel="alternative" href="/atom.xml" title="hanzj&#39; Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/assets/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
  <script src="/js/jquery1.8.2.min.js"></script>
  <script src="/js/jquery.nicescroll.js"></script>
  <script src="/js/jquery.qrcode.min.js"></script>
  <script src="/js/ug-theme-default.js"></script>
  <script src="/js/unitegallery.js"></script>
</head>

<body>

  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img src="/assets/hanzj.jpg" class="js-avatar">
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/" class="alluraregular">hanzj</a></h1>
		</hgroup>
        
		
		<p class="header-subtitle">不积跬步，无以至千里</p>
		
        
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
							<li><a href="/about">关于我</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
						</div>
					</nav>
				</section>

				

				

				
				
				<section class="switch-part switch-part3">
				
					<div id="js-aboutme">乐于分享,喜欢环境音乐,爱看动漫,偶尔写写技术博客的小程一枚...</div>
				</section>
				
			</div>
		</div>
	</header>
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">hanzj</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="/assets/hanzj.jpg" class="js-avatar">
			</div>
			<hgroup>
				  <h1 class="header-author alluraregular">hanzj</h1>
			</hgroup>
			
				<p class="header-subtitle">不积跬步，无以至千里</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
					<li><a href="/about">关于我</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<!--<nav class="header-nav">
				<div class="social">
					
				</div>
			</nav>-->
		</header>
	</div>
</nav>

	  <!--是否开启最近通知-->
	  
      <div class="body-wrap"><article id="post-maven-practice" class="article article-type-post" itemscope itemprop="blogPost">
    <script>
        $("html").niceScroll({
            cursorcolor: "#2a2929",
            cursoropacitymax: 1,
            touchbehavior: false,
            cursorwidth: "6px",
            cursorborder: "5",
            cursorborderradius: "0px",
            autohidemode: true
        });
    </script>
    
        <div class="article-meta">
            <a href="/2017/04/28/maven-practice/" class="article-date">
  	<time datetime="2017-04-28T11:43:36.000Z" itemprop="datePublished">2017-04-28</time>
</a>

        </div>
        
            <div class="article-inner">
                
                        
                            <header class="article-header">
                                
  
    <h1 class="article-title" itemprop="name">
      maven实战
    </h1>
  


                            </header>
                        

                                        <div class="article-entry" itemprop="articleBody">
                                           <!--
                                            

                                                    <p class="toc-button">目录</p>
<div id="toc" class="toc-article" style="display:none;">
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-maven使用入门"><span class="toc-number">1.</span> <span class="toc-text">1. maven使用入门</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-编写POM"><span class="toc-number">1.1.</span> <span class="toc-text">1.1. 编写POM</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-编写主代码"><span class="toc-number">1.2.</span> <span class="toc-text">1.2. 编写主代码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-编写测试代码"><span class="toc-number">1.3.</span> <span class="toc-text">1.3. 编写测试代码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-打包和运行"><span class="toc-number">1.4.</span> <span class="toc-text">1.4. 打包和运行</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-坐标和依赖"><span class="toc-number">2.</span> <span class="toc-text">2. 坐标和依赖</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-依赖范围"><span class="toc-number">2.1.</span> <span class="toc-text">2.1. 依赖范围</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-传递性依赖和依赖范围"><span class="toc-number">2.2.</span> <span class="toc-text">2.2. 传递性依赖和依赖范围</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-依赖调解"><span class="toc-number">2.3.</span> <span class="toc-text">2.3. 依赖调解</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-可选依赖"><span class="toc-number">2.4.</span> <span class="toc-text">2.4. 可选依赖</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-排除依赖"><span class="toc-number">2.5.</span> <span class="toc-text">2.5. 排除依赖</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-6-优化依赖"><span class="toc-number">2.6.</span> <span class="toc-text">2.6. 优化依赖</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-仓库"><span class="toc-number">3.</span> <span class="toc-text">3. 仓库</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-本地仓库"><span class="toc-number">3.1.</span> <span class="toc-text">3.1. 本地仓库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-中央仓库"><span class="toc-number">3.2.</span> <span class="toc-text">3.2. 中央仓库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-远程仓库配置"><span class="toc-number">3.3.</span> <span class="toc-text">3.3. 远程仓库配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-远程仓库的认证"><span class="toc-number">3.4.</span> <span class="toc-text">3.4. 远程仓库的认证</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-5-部署至远程仓库"><span class="toc-number">3.5.</span> <span class="toc-text">3.5. 部署至远程仓库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-6-镜像"><span class="toc-number">3.6.</span> <span class="toc-text">3.6. 镜像</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-生命周期和插件"><span class="toc-number">4.</span> <span class="toc-text">4. 生命周期和插件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-三套生命周期"><span class="toc-number">4.1.</span> <span class="toc-text">4.1. 三套生命周期</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-1-clean生命周期"><span class="toc-number">4.1.1.</span> <span class="toc-text">4.1.1. clean生命周期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-2-default生命周期"><span class="toc-number">4.1.2.</span> <span class="toc-text">4.1.2. default生命周期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-3-site声明周期"><span class="toc-number">4.1.3.</span> <span class="toc-text">4.1.3. site声明周期</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-命令行与生命周期"><span class="toc-number">4.2.</span> <span class="toc-text">4.2. 命令行与生命周期</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-内置插件绑定"><span class="toc-number">4.3.</span> <span class="toc-text">4.3. 内置插件绑定</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-4-自定义绑定"><span class="toc-number">4.4.</span> <span class="toc-text">4.4. 自定义绑定</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-5-配置插件"><span class="toc-number">4.5.</span> <span class="toc-text">4.5. 配置插件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-6-POM中插件任务配置"><span class="toc-number">4.6.</span> <span class="toc-text">4.6. POM中插件任务配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-7-在线插件信息"><span class="toc-number">4.7.</span> <span class="toc-text">4.7. 在线插件信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-8-插件仓库"><span class="toc-number">4.8.</span> <span class="toc-text">4.8. 插件仓库</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-聚合和继承"><span class="toc-number">5.</span> <span class="toc-text">5. 聚合和继承</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-聚合"><span class="toc-number">5.1.</span> <span class="toc-text">5.1. 聚合</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-继承"><span class="toc-number">5.2.</span> <span class="toc-text">5.2. 继承</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-可继承的POM元素"><span class="toc-number">5.3.</span> <span class="toc-text">5.3. 可继承的POM元素</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-4-依赖管理"><span class="toc-number">5.4.</span> <span class="toc-text">5.4. 依赖管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-5-import依赖范围"><span class="toc-number">5.5.</span> <span class="toc-text">5.5. import依赖范围</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-6-插件管理"><span class="toc-number">5.6.</span> <span class="toc-text">5.6. 插件管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-7-反应堆"><span class="toc-number">5.7.</span> <span class="toc-text">5.7. 反应堆</span></a></li></ol></li></ol>
</div>
<script>
    $(function(){

        var width = document.body.scrollWidth;
        if (width <=550) {
             $(".toc-button").css("display","none");
        }
        $(".toc-button").hover(function(){
            var top = $(this).get(0).offsetTop-$(".toc-article").height()/2;
            $(".toc-article").css({
                top:top +"px"
            });
            $("#toc").show(1000,function(){});
           // $("#toc").animate({width:500;},3000);
        },function(){

        });
        $(".toc-article").hover(function(){

        },function(){
            $("#toc").hide(1000,function(){});
        });
    })
</script>

                                                  
                                            
                                            -->
                                            
                                                     <h1 id="1-maven使用入门"><a href="#1-maven使用入门" class="headerlink" title="1. maven使用入门"></a>1. maven使用入门</h1><h2 id="1-1-编写POM"><a href="#1-1-编写POM" class="headerlink" title="1.1. 编写POM"></a>1.1. 编写POM</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">project</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.juvenxu.mvnbook<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hello-world<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span> Maven hello-world project<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></div></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="1-2-编写主代码"><a href="#1-2-编写主代码" class="headerlink" title="1.2. 编写主代码"></a>1.2. 编写主代码</h2><p>在src/main/java/下新建自己的包名，然后编写程序代码。代码编写完成后在项目根目录运行命令 <code>mvn clean compile</code> 进行编译。</p>
<h2 id="1-3-编写测试代码"><a href="#1-3-编写测试代码" class="headerlink" title="1.3. 编写测试代码"></a>1.3. 编写测试代码</h2><p>在src/test/java/下编写测试代码。执行命令 mvn clea test 测试代码。<br><br>由于历史原因，Maven的核心插件之一–complier插件默认只编译java1.3，因此需要配置该插件使其支持更高更高版本的java。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">project</span>&gt;</span></div><div class="line">   ...</div><div class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.6<span class="tag">&lt;/<span class="name">source</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.6<span class="tag">&lt;/<span class="name">target</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h2 id="1-4-打包和运行"><a href="#1-4-打包和运行" class="headerlink" title="1.4. 打包和运行"></a>1.4. 打包和运行</h2><p>执行命令 <code>mvn clean package</code> 进行打包，默认类型为jar，在target目录下可以看到输出的jar。<br><br>命令 <code>mvn clean install</code> ，会将输出的jar安装到本地Maven仓库。<br><br>compile 、test、package、install是一个渐进的过程，执行后边的命令之前会执行前边的命令。<br><br>为了生成可执行的jar，需要借助maven-shade-plugin，再次打包后即可通过java -jar 命令直接运行该jar<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-shade-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">transformers</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">transformer</span> <span class="attr">implementation</span>=<span class="string">"org.apache.maven.plugins.shade.resource.ManifestResourceTransformer"</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">mainClass</span>&gt;</span></div><div class="line">                            com.juvenxu.mavenbook.helloworld.HelloWorld</div><div class="line">                        <span class="tag">&lt;/<span class="name">mainClass</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">transformer</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">transformers</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">executions</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">execution</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">phase</span>&gt;</span>package<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">goals</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">goal</span>&gt;</span>shade<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h1 id="2-坐标和依赖"><a href="#2-坐标和依赖" class="headerlink" title="2. 坐标和依赖"></a>2. 坐标和依赖</h1><h2 id="2-1-依赖范围"><a href="#2-1-依赖范围" class="headerlink" title="2.1. 依赖范围"></a>2.1. 依赖范围</h2><p>maven项目有三种classpath（编译，测试和运行），依赖范围就是用来控制依赖和这三种classpath的关系：</p>
<table>
<thead>
<tr>
<th style="text-align:center">依赖范围（Scope）</th>
<th style="text-align:center">编译classpath有效</th>
<th style="text-align:center">测试classpath有效</th>
<th style="text-align:center">运行时classpath有效</th>
<th style="text-align:center">例子</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">compile</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">spring-core</td>
</tr>
<tr>
<td style="text-align:center">test</td>
<td style="text-align:center">-</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">-</td>
<td style="text-align:center">JUnit</td>
</tr>
<tr>
<td style="text-align:center">provided</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">-</td>
<td style="text-align:center">servlet-api</td>
</tr>
<tr>
<td style="text-align:center">runtime</td>
<td style="text-align:center">-</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">JDBC驱动实现</td>
</tr>
<tr>
<td style="text-align:center">system</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">Y</td>
<td style="text-align:center">本地的，Maven仓库之外的类库文件</td>
</tr>
</tbody>
</table>
<h2 id="2-2-传递性依赖和依赖范围"><a href="#2-2-传递性依赖和依赖范围" class="headerlink" title="2.2. 传递性依赖和依赖范围"></a>2.2. 传递性依赖和依赖范围</h2><p>假如，A依赖B，B依赖C，我们就说A对B是第一直接依赖，B对C是第二直接依赖，A对C是传递性依赖。第一直接依赖范围和第二直接依赖范围决定了传递性依赖范围。左边第一列表示第一直接依赖范围，第一行表示第二直接依赖范围</p>
<table>
<thead>
<tr>
<th style="text-align:center">\</th>
<th style="text-align:center">compile</th>
<th style="text-align:center">test</th>
<th style="text-align:center">provided</th>
<th style="text-align:center">runtime</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">compile</td>
<td style="text-align:center">compile</td>
<td style="text-align:center">—–</td>
<td style="text-align:center">—–</td>
<td style="text-align:center">runtime</td>
</tr>
<tr>
<td style="text-align:center">test</td>
<td style="text-align:center">test</td>
<td style="text-align:center">—–</td>
<td style="text-align:center">—–</td>
<td style="text-align:center">test</td>
</tr>
<tr>
<td style="text-align:center">provided</td>
<td style="text-align:center">provided</td>
<td style="text-align:center">—–</td>
<td style="text-align:center">provided</td>
<td style="text-align:center">provided</td>
</tr>
<tr>
<td style="text-align:center">runtime</td>
<td style="text-align:center">runtime</td>
<td style="text-align:center">—–</td>
<td style="text-align:center">—–</td>
<td style="text-align:center">runtime</td>
</tr>
</tbody>
</table>
<h2 id="2-3-依赖调解"><a href="#2-3-依赖调解" class="headerlink" title="2.3. 依赖调解"></a>2.3. 依赖调解</h2><p>第一原则是：路径最近者优先：A&gt;B&gt;C&gt;X(1.0),A&gt;D&gt;X(2.0),那么2.0会 被解析。<br><br>第二原则是：第一声明者优先：A&gt;B&gt;X(1.0),A&gt;C&gt;X(2.0) ,1.0在前所以解析1.0</p>
<h2 id="2-4-可选依赖"><a href="#2-4-可选依赖" class="headerlink" title="2.4. 可选依赖"></a>2.4. 可选依赖</h2><p><code>&lt;optional&gt;true&lt;/optional&gt;</code>表示依赖是可选依赖，可选依赖不会被传递。A&gt;B ，B&gt;X(可选) ，B&gt;Y(可选),X Y将不会对A产生任何影响。如果A又依赖于X，那么只能在A中显式的声明X。（为什么使用可选依赖？可能项目B有两种特性，特性一依赖于X ，特性二依赖于Y，这两个特性是互斥的，比如数据库驱动程序。）</p>
<h2 id="2-5-排除依赖"><a href="#2-5-排除依赖" class="headerlink" title="2.5. 排除依赖"></a>2.5. 排除依赖</h2><p>项目A依赖项目B，项目B依赖项目C，但是由于一些原因不想引入项目C，而是自己显式的引入C</p>
<h2 id="2-6-优化依赖"><a href="#2-6-优化依赖" class="headerlink" title="2.6. 优化依赖"></a>2.6. 优化依赖</h2><p>nihao<br><code>mvn dependency:list</code>       可以查看当前项目已解析依赖 <br><br><code>mvn dependency:tree</code>       可以查看项目的依赖树<br><br><code>mvn dependency:analyze</code>    可以帮助分析当前项目的依赖</p>
<h1 id="3-仓库"><a href="#3-仓库" class="headerlink" title="3. 仓库"></a>3. 仓库</h1><h2 id="3-1-本地仓库"><a href="#3-1-本地仓库" class="headerlink" title="3.1. 本地仓库"></a>3.1. 本地仓库</h2><p>localRepository可以设置自己想要定义的本地仓库地址，默认为~/.m2/repository<br><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">&lt;!-- localRepository</span></div><div class="line"> | The path to the local repository maven will use to store artifacts.</div><div class="line"> | Default: $&#123;user.home&#125;/.m2/repository--&gt;</div><div class="line"><span class="tag">&lt;<span class="name">localRepository</span>&gt;</span>/path/to/local/repo<span class="tag">&lt;/<span class="name">localRepository</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h2 id="3-2-中央仓库"><a href="#3-2-中央仓库" class="headerlink" title="3.2. 中央仓库"></a>3.2. 中央仓库</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">repositories</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">repository</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">id</span>&gt;</span>central<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>Maven Repository Switchboard<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://repo1.maven.org/maven2<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">layout</span>&gt;</span>default<span class="tag">&lt;/<span class="name">layout</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>false<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="3-3-远程仓库配置"><a href="#3-3-远程仓库配置" class="headerlink" title="3.3. 远程仓库配置"></a>3.3. 远程仓库配置</h2><p>在很多情况下，默认的中央仓库无法满足项目的需求，可能项目需要的构件存在于另外一个远程仓库中，如:JBoss，Maven仓库。这时，可以在POM中配置该仓库，见代码请单：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">repositories</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;<span class="name">repository</span>&gt;</span> </div><div class="line">      <span class="tag">&lt;<span class="name">id</span>&gt;</span>jboss<span class="tag">&lt;/<span class="name">id</span>&gt;</span> </div><div class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>JBoss Repository<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </div><div class="line">      <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://repository.jboss.com/maven2/<span class="tag">&lt;/<span class="name">url</span>&gt;</span> </div><div class="line">      <span class="tag">&lt;<span class="name">releases</span>&gt;</span> </div><div class="line">        <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span> </div><div class="line">      <span class="tag">&lt;/<span class="name">releases</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;/<span class="name">repository</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span> </div><div class="line">      <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>false<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;<span class="name">layout</span>&gt;</span>default<span class="tag">&lt;/<span class="name">layout</span>&gt;</span> </div><div class="line"><span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>在repositories元素下，可以使用repository子元素声明一个或者多个远程仓库。任何一个仓库声明的id必须是唯一的，尤其需要注意的是，maven自带的中央仓库使用的id为central，如果其他的仓库声明也使用该id，就会覆盖中央仓库的配置。<br><br>该例配置中的releases和snapshots元素比较重要，它们用来控制Maven对于发布版构件和快照版构件的下载。该例中releases的enabled值为true，表示开启JBoss仓库的发布版本下载支持，而snapshots的enabled值为false，表示关闭JBoss仓库的快照版本的下载支持。<br><br>该例中的layout元素值default表示仓库的布局是Maven2及Maven3的默认布局，而不是Maven1的布局。<br><br>对于releases和snapshots来说，除了enabled，它们还包含另外两个子元素updatePolicy和checksumPolicy：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">snapshots</span>&gt;</span> </div><div class="line">  <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span> </div><div class="line">  <span class="tag">&lt;<span class="name">updatePolicy</span>&gt;</span>daily<span class="tag">&lt;/<span class="name">updatePolicy</span>&gt;</span> </div><div class="line">  <span class="tag">&lt;<span class="name">checksumPolicy</span>&gt;</span>ignore<span class="tag">&lt;/<span class="name">checksumPolicy</span>&gt;</span> </div><div class="line"><span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>元素updatePolicy用来配置Maven从远程仓库检查更新的频率，默认的 值是daily，表示Maven每天检查一次。其他可用的值包括：never—从不检查更新；always—每次构建都检查更 新；interval:X—每隔X分钟检查一次更新(X为任意整数)。<br><br>元素checksumPolicy用来配置Maven检查检验和文件的策略。当构件被部署到Maven仓库中时，会同时部署对应的校验和 文件。在下载构件的时候，Maven会验证校验和文件，如果校验和验证失败，怎么办？当checksumPolicy的值为默认的warn时，Maven 会在执行构建时输出警告信息，其他可用的值包括：fail—Maven遇到校验和错误就让构建失败；ignore—使用Maven完全忽略校验和错误。</p>
<h2 id="3-4-远程仓库的认证"><a href="#3-4-远程仓库的认证" class="headerlink" title="3.4. 远程仓库的认证"></a>3.4. 远程仓库的认证</h2><p>假设需要为一个id为my-proj的仓库配置认证信息，编辑settings.xml文件见代码清单：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span> </div><div class="line">  ... </div><div class="line">  <span class="tag">&lt;<span class="name">servers</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;<span class="name">server</span>&gt;</span> </div><div class="line">      <span class="tag">&lt;<span class="name">id</span>&gt;</span>my-proj<span class="tag">&lt;/<span class="name">id</span>&gt;</span> </div><div class="line">      <span class="tag">&lt;<span class="name">username</span>&gt;</span>repo-user<span class="tag">&lt;/<span class="name">username</span>&gt;</span> </div><div class="line">      <span class="tag">&lt;<span class="name">password</span>&gt;</span>repo-pwd<span class="tag">&lt;/<span class="name">password</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;/<span class="name">server</span>&gt;</span> </div><div class="line">  <span class="tag">&lt;/<span class="name">servers</span>&gt;</span> </div><div class="line">  ... </div><div class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>settings.xml中server元素的id必须与POM中需要认证的repository元素的id完全一致。</p>
<h2 id="3-5-部署至远程仓库"><a href="#3-5-部署至远程仓库" class="headerlink" title="3.5. 部署至远程仓库"></a>3.5. 部署至远程仓库</h2><p>Maven除了能对项目进行编译、测试、打包之外，还能将项目生成的构建部署到仓库中。首先，需要编辑项目的pom.xml文件。配置distributionManagement元素，见代码：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">project</span>&gt;</span> </div><div class="line">  ... </div><div class="line">  <span class="tag">&lt;<span class="name">destributionManagement</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;<span class="name">repository</span>&gt;</span> </div><div class="line">      <span class="tag">&lt;<span class="name">id</span>&gt;</span>proj-releases<span class="tag">&lt;/<span class="name">id</span>&gt;</span> </div><div class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>Proj Release Repository<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </div><div class="line">      <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://192.168.1.100/content/repositories/proj-releases<span class="tag">&lt;/<span class="name">url</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;/<span class="name">repository</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;<span class="name">snapshotRepository</span>&gt;</span> </div><div class="line">      <span class="tag">&lt;<span class="name">id</span>&gt;</span>proj-snapshots<span class="tag">&lt;/<span class="name">id</span>&gt;</span> </div><div class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>Proj Snapshot Repository<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </div><div class="line">      <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://192.168.1.100/content/repositories/proj-snapshots<span class="tag">&lt;/<span class="name">url</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;/<span class="name">snapshotRepository</span>&gt;</span> </div><div class="line">  <span class="tag">&lt;/<span class="name">destributionManagement</span>&gt;</span> </div><div class="line">  ... </div><div class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>distributionManagement包含repository和snapshotRepository子元素，前者表示发布版本构件的仓库，后者表示快照版本的仓库。往远程仓库部署构件的时候，往往需要认证。同4.</p>
<h2 id="3-6-镜像"><a href="#3-6-镜像" class="headerlink" title="3.6. 镜像"></a>3.6. 镜像</h2><p>如果仓库X可以提供仓库Y存储的所有内容，那么就可以认为X是Y的一个镜像。换句话说，任何一个可以从仓库Y获得的构件，都胡够从它的镜像中获取。举个例子，<a href="http://maven.net.cn/content/groups/public/" target="_blank" rel="external">http://maven.net.cn/content/groups/public/</a> 是中央仓库<a href="http://repo1.maven.org/maven2/" target="_blank" rel="external">http://repo1.maven.org/maven2/</a> 在中国的镜像，由于地理位置的因素，该镜像往往能够提供比中央仓库更快的务。因此，可以配置Maven使用该镜像来替代中央仓库。编辑settings.xml，代码如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span> </div><div class="line">     ... </div><div class="line">     <span class="tag">&lt;<span class="name">mirrors</span>&gt;</span> </div><div class="line">       <span class="tag">&lt;<span class="name">mirror</span>&gt;</span> </div><div class="line">         <span class="tag">&lt;<span class="name">id</span>&gt;</span>maven.net.cn<span class="tag">&lt;/<span class="name">id</span>&gt;</span> </div><div class="line">         <span class="tag">&lt;<span class="name">name</span>&gt;</span>one of the central mirrors in china<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </div><div class="line">         <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.net.cn/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span> </div><div class="line">         <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span> </div><div class="line">       <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span> </div><div class="line">     <span class="tag">&lt;/<span class="name">mirrors</span>&gt;</span> </div><div class="line">     ... </div><div class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></div><div class="line">``` </div><div class="line">`<span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>`的值为central，表示该配置为中央仓库的镜像，任何对于中央仓库的请求都会转至该镜像。任何需要的构件都可以从私服获得，私服就是所有仓库的镜像。这时，可以配置这样的一个镜像：  </div><div class="line"></div><div class="line"> ```xml</div><div class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span> </div><div class="line">      ... </div><div class="line">      <span class="tag">&lt;<span class="name">mirrors</span>&gt;</span> </div><div class="line">        <span class="tag">&lt;<span class="name">mirror</span>&gt;</span> </div><div class="line">          <span class="tag">&lt;<span class="name">id</span>&gt;</span>internal-repository<span class="tag">&lt;/<span class="name">id</span>&gt;</span> </div><div class="line">          <span class="tag">&lt;<span class="name">name</span>&gt;</span>Internal Repository Manager<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </div><div class="line">          <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://192.168.1.100/maven2<span class="tag">&lt;/<span class="name">url</span>&gt;</span> </div><div class="line">          <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span> </div><div class="line">        <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span> </div><div class="line">      <span class="tag">&lt;/<span class="name">mirrors</span>&gt;</span> </div><div class="line">      ... </div><div class="line"> <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p><code>&lt;mirrorOf&gt;</code>的值为星号，表示该配置是所有Maven仓库的镜像。为了满足一些复杂需求，maven还支持更高级的镜像配置：<br><code>&lt;mirrorOf&gt;*&lt;/mirrorOf&gt;</code> 匹配所有远程仓库。<br><br><code>&lt;mirrorOf&gt;external:*&lt;/mirrorOf&gt;</code>匹配所有远程仓库，使用localhost的除外，使用file://协议的除外。也就是说，匹配所有不在本机上的远程仓库。<br><br><code>&lt;mirrorOf&gt;repo1,repo2&lt;/mirrorOf&gt;</code>匹配仓库repo1和repo2，使用逗号分隔多个远程仓库。<br><br><code>&lt;mirrorOf&gt;*,!repo1&lt;/miiroOf&gt;</code>匹配所有远程仓库，repo1除外，使用感叹号将仓库从匹配中排除。</p>
<h1 id="4-生命周期和插件"><a href="#4-生命周期和插件" class="headerlink" title="4. 生命周期和插件"></a>4. 生命周期和插件</h1><h2 id="4-1-三套生命周期"><a href="#4-1-三套生命周期" class="headerlink" title="4.1. 三套生命周期"></a>4.1. 三套生命周期</h2><p>maven拥有三套项目独立的生命周期，他们分别是clean、default和site。clean声明周期的目的是清理项目，default声明周期的目的是构件项目，而site声明周期的目的是建立项目站点。</p>
<h3 id="4-1-1-clean生命周期"><a href="#4-1-1-clean生命周期" class="headerlink" title="4.1.1. clean生命周期"></a>4.1.1. clean生命周期</h3><p> clean生命周期的目的是清理项目，它包含三个阶段：<br><br>   1）pre-clean 执行一些清理前需要完成的工作<br><br>   2）clean 清理上一次构建生成的文件<br><br>   3）post-clean 执行一些清理后需要完成的工作</p>
<h3 id="4-1-2-default生命周期"><a href="#4-1-2-default生命周期" class="headerlink" title="4.1.2. default生命周期"></a>4.1.2. default生命周期</h3><p>default生命周期定义了真正构建时所需要的所有步骤，它是这三个中最核心的部分，包含的阶段如下：<br><br>　　1)validate 验证项目是正确的并且所有必需的信息都是可用的<br><br>　　2)initialize 初始化构建状态<br><br>　　3)generate-sources 产生所有的用来编译的源代码<br><br>　　4)process-sources 处理源代码<br><br>　　5)generate-resources 产生包含在package中的资源<br><br>　　6)process-resources 复制和处理资源到目标目录，为打包做好准备<br><br>　　7)compile 编译项目的主源代码<br><br>　　8)process-classes 对编译器产生的文件进行后期处理<br><br>　　9)generate-test-sources 产生所有用来编译的测试源代码<br><br>　　10)process-test-sources 处理测试源代码<br><br>　　11)generate-test-resources 创建测试所需要的资源<br><br>　　12)process-test-resources 复制和处理资源到测试目标目录<br><br>　　13)compile 编译测试源代码到目标目录<br><br>　　14)process-test-classes 对编译测试源代码产生的文件进行后期处理<br><br>　　15)test 使用适当的单元测试框架运行测试，这些测试代码不应该被打包或者部署<br><br>　　16)prepare-package 执行所有需要执行的操作为打包做准备，这往往会产生一个还未打包的处理过的包版本<br><br>　　17)package 使用设置的方式对编译过的文件进行打包<br><br>　　18)pre-integration-test 执行一些集成测试执行前必须的操作<br><br>　　19)integration-test 处理和部署包到集成测试环境中，进行测试<br><br>　　20)post-integration-test 对集成测试进行后期处理<br><br>　　21)verify 执行所有检查确保包是正确的和符合质量要求的<br><br>　　22)install 安装包到本地仓库，为其他本地的项目提供依赖<br><br>　　23)deploy 发布包，拷贝最后的包到远程仓库中，为其他的开发任何项目提供使用</p>
<h3 id="4-1-3-site声明周期"><a href="#4-1-3-site声明周期" class="headerlink" title="4.1.3. site声明周期"></a>4.1.3. site声明周期</h3><p>site：建立和发布项目站点<br><br>　　1)pre-site 前期准备<br><br>　　2)site 产生项目的站点文档<br><br>　　3)post-site 后期处理<br><br>　　4)site-deploy 部署站点到服务器<br></p>
<h2 id="4-2-命令行与生命周期"><a href="#4-2-命令行与生命周期" class="headerlink" title="4.2. 命令行与生命周期"></a>4.2. 命令行与生命周期</h2><p>从命令行执行Maven任务的最主要方式就是调用Maven的生命周期阶段，需要注意的是，各个生命周期阶段是相互独立的，而一个生命周期的阶段是有前后依赖关系的，举几个例子：<br><br><code>mvn clean</code> 该命令调用clean生命周期的clean阶段。实际执行的阶段为clean生命周期的pre-clean和clean阶段<br><br><code>mvn test</code> 该命令调用default生命周期的test阶段。实际执行的阶段为default生命周期的直到test的所有阶段，这也解释了为什么在执行测试的时候，项目的代码能够自动得以编译<br><br><code>mvn clean install</code> 该命令调用clean生命周期的clean阶段和default生命周期的install阶段。实际执行的为clean生命周期的pre-clean、clean阶段以及default生命周期的直到install的所有阶段。该命令结合了两个生命周期，在执行真正地项目构建之前清理项目是一个很好的实践<br><br><code>mvn clean deploy site-deploy</code> 该命令调用clean生命周期的clean阶段，default生命周期的deploy阶段以及site生命周期的site-deploy阶段。实际执行的为clean生命周期的pre-clean,clean阶段以及default和site生命周期的所有阶段</p>
<h2 id="4-3-内置插件绑定"><a href="#4-3-内置插件绑定" class="headerlink" title="4.3. 内置插件绑定"></a>4.3. 内置插件绑定</h2><p>clean生命周期阶段和插件目标的绑定关系</p>
<table>
<thead>
<tr>
<th style="text-align:center">生命周期阶段</th>
<th style="text-align:center">插件目标</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">pre-clean</td>
<td style="text-align:center">–</td>
</tr>
<tr>
<td style="text-align:center">clean</td>
<td style="text-align:center">maven-clean-plugin:clean</td>
</tr>
<tr>
<td style="text-align:center">post-clean</td>
<td style="text-align:center">–</td>
</tr>
</tbody>
</table>
<p>site生命周期阶段和插件目标的绑定关系</p>
<table>
<thead>
<tr>
<th style="text-align:center">生命周期阶段</th>
<th style="text-align:center">插件目标</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">pre-site</td>
<td style="text-align:center">–    </td>
</tr>
<tr>
<td style="text-align:center">site</td>
<td style="text-align:center">maven-site-plugin:site</td>
</tr>
<tr>
<td style="text-align:center">post-site</td>
<td style="text-align:center">–</td>
</tr>
<tr>
<td style="text-align:center">site-deploy</td>
<td style="text-align:center">maven-site-plugin:deploy</td>
</tr>
</tbody>
</table>
<p>default生命周期的阶段与插件的目标绑定关系由项目打包类型所决定，jar类型（默认）的如下<br>生命周期阶段            |     插件目标<br>:——–:             |     :——–:<br>process-resources      |     maven-resources-plugin:resources<br>compile                |     maven-compiler-pugin:compile<br>process-test-resources |     maven-resources-plugin:testResources<br>test-compile           |     maven-compiler-plugin:testCompile<br>test                   |     maven-surefire-plugin:testCompile<br>package                |     maven-jar-plugin:jar<br>install                |     maven-install-plugin:install<br>deploy                 |     maven-deploy-plugin:deploy</p>
<p>default生命周期除jar外常见的还有war，pom，maven-plugin，ear等。</p>
<h2 id="4-4-自定义绑定"><a href="#4-4-自定义绑定" class="headerlink" title="4.4. 自定义绑定"></a>4.4. 自定义绑定</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;<span class="name">resources</span>&gt;</span> </div><div class="line">        <span class="tag">&lt;<span class="name">resource</span>&gt;</span> </div><div class="line">            <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resource<span class="tag">&lt;/<span class="name">directory</span>&gt;</span> </div><div class="line">        <span class="tag">&lt;/<span class="name">resource</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;/<span class="name">resources</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span> </div><div class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span> </div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-source-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> </div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span> </div><div class="line">            <span class="tag">&lt;<span class="name">executions</span>&gt;</span> </div><div class="line">                <span class="tag">&lt;<span class="name">execution</span>&gt;</span> </div><div class="line">                    <span class="tag">&lt;<span class="name">id</span>&gt;</span>buildSource<span class="tag">&lt;/<span class="name">id</span>&gt;</span> </div><div class="line">                    <span class="tag">&lt;<span class="name">phase</span>&gt;</span>verify<span class="tag">&lt;/<span class="name">phase</span>&gt;</span> </div><div class="line">                    <span class="tag">&lt;<span class="name">goals</span>&gt;</span> </div><div class="line">                        <span class="tag">&lt;<span class="name">goal</span>&gt;</span>jar-no-fork<span class="tag">&lt;/<span class="name">goal</span>&gt;</span> </div><div class="line">                    <span class="tag">&lt;/<span class="name">goals</span>&gt;</span> </div><div class="line">                    <span class="tag">&lt;<span class="name">inherited</span>&gt;</span>false<span class="tag">&lt;/<span class="name">inherited</span>&gt;</span> </div><div class="line">                    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span> </div><div class="line">                    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span> </div><div class="line">                <span class="tag">&lt;/<span class="name">execution</span>&gt;</span> </div><div class="line">            <span class="tag">&lt;/<span class="name">executions</span>&gt;</span> </div><div class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span> </div><div class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></div></pre></td></tr></table></figure>
<p>通过以上配置，再执行mvn verify，maven-source-plugin：jar-no-fork会得以执行，它会创建一个以-sources.jar结尾的源码文件包。</p>
<h2 id="4-5-配置插件"><a href="#4-5-配置插件" class="headerlink" title="4.5. 配置插件"></a>4.5. 配置插件</h2><p>Maven插件高度易扩展，可以方便的进行自定义配置。如：配置maven-compiler-plugin插件编译源代码的JDK版本为1.7：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">source</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">target</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h2 id="4-6-POM中插件任务配置"><a href="#4-6-POM中插件任务配置" class="headerlink" title="4.6. POM中插件任务配置"></a>4.6. POM中插件任务配置</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span> </div><div class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span> </div><div class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </div><div class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-antrun-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> </div><div class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span> </div><div class="line">        <span class="tag">&lt;<span class="name">executions</span>&gt;</span> </div><div class="line">            <span class="tag">&lt;<span class="name">execution</span>&gt;</span> </div><div class="line">                <span class="tag">&lt;<span class="name">id</span>&gt;</span>ant-validate<span class="tag">&lt;/<span class="name">id</span>&gt;</span> </div><div class="line">                <span class="tag">&lt;<span class="name">phase</span>&gt;</span>validate<span class="tag">&lt;/<span class="name">phase</span>&gt;</span> </div><div class="line">                <span class="tag">&lt;<span class="name">goals</span>&gt;</span> </div><div class="line">                    <span class="tag">&lt;<span class="name">goal</span>&gt;</span>run<span class="tag">&lt;/<span class="name">goal</span>&gt;</span> </div><div class="line">                <span class="tag">&lt;/<span class="name">goals</span>&gt;</span> </div><div class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span> </div><div class="line">                    <span class="tag">&lt;<span class="name">tasks</span>&gt;</span> </div><div class="line">                        <span class="tag">&lt;<span class="name">echo</span>&gt;</span>I'm bound to validate phase.<span class="tag">&lt;/<span class="name">echo</span>&gt;</span> </div><div class="line">                    <span class="tag">&lt;/<span class="name">tasks</span>&gt;</span> </div><div class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span> </div><div class="line">            <span class="tag">&lt;/<span class="name">execution</span>&gt;</span> </div><div class="line">            <span class="tag">&lt;<span class="name">execution</span>&gt;</span> </div><div class="line">                <span class="tag">&lt;<span class="name">id</span>&gt;</span>ant-verify<span class="tag">&lt;/<span class="name">id</span>&gt;</span> </div><div class="line">                <span class="tag">&lt;<span class="name">phase</span>&gt;</span>verify<span class="tag">&lt;/<span class="name">phase</span>&gt;</span> </div><div class="line">                <span class="tag">&lt;<span class="name">goals</span>&gt;</span> </div><div class="line">                    <span class="tag">&lt;<span class="name">goal</span>&gt;</span>run<span class="tag">&lt;/<span class="name">goal</span>&gt;</span> </div><div class="line">                <span class="tag">&lt;/<span class="name">goals</span>&gt;</span> </div><div class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span> </div><div class="line">                    <span class="tag">&lt;<span class="name">tasks</span>&gt;</span> </div><div class="line">                        <span class="tag">&lt;<span class="name">echo</span>&gt;</span>I'm bound to verify phase.<span class="tag">&lt;/<span class="name">echo</span>&gt;</span> </div><div class="line">                    <span class="tag">&lt;/<span class="name">tasks</span>&gt;</span> </div><div class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span> </div><div class="line">            <span class="tag">&lt;/<span class="name">execution</span>&gt;</span> </div><div class="line">        <span class="tag">&lt;/<span class="name">executions</span>&gt;</span> </div><div class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span> </div><div class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></div></pre></td></tr></table></figure>
<p>在上述代码中，首先，mvaen-antrun-plugin:run与validate阶段绑定，从而构成一个id为ant-validate的任务。插件全局配置中的configuration元素位于plugin元素下面，而这里的configuration元素则位于execution元素下面，表示这是特定任务的配置，而非插件整体的配置。这个ant-validate任务配置了一个echo Act任务，向命令行输出一段文字，表示该任务是绑定到validate阶段的。第二个任务的id为ant-varify，它绑定到了verify阶段，同样它也输出一段文字到命令行，告诉我们任务绑定到了verify阶段。</p>
<h2 id="4-7-在线插件信息"><a href="#4-7-在线插件信息" class="headerlink" title="4.7. 在线插件信息"></a>4.7. 在线插件信息</h2><p>maven官方插件详细地址：<a href="http://maven.apache.org/plugins/index.html" target="_blank" rel="external">http://maven.apache.org/plugins/index.html</a></p>
<h2 id="4-8-插件仓库"><a href="#4-8-插件仓库" class="headerlink" title="4.8. 插件仓库"></a>4.8. 插件仓库</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">pluginRepositories</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">pluginRepository</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://127.0.0.1:8081/nexus/content/groups/public<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">releases</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">releases</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></div><div class="line">       <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">pluginRepository</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">pluginRepositories</span>&gt;</span></div></pre></td></tr></table></figure>
<h1 id="5-聚合和继承"><a href="#5-聚合和继承" class="headerlink" title="5. 聚合和继承"></a>5. 聚合和继承</h1><h2 id="5-1-聚合"><a href="#5-1-聚合" class="headerlink" title="5.1. 聚合"></a>5.1. 聚合</h2><p>可以通过在一个打包方式为POM的Maven项目中声明任意数量的module元素来实现模块的聚合。这里每个module的值都是一个子模块POM相对于当前POM的相对路径。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">project</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.juvenxu.mvnbook.account<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>account-aggregator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span> pom <span class="tag">&lt;/<span class="name">packaging</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>Account Aggregator<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;<span class="name">modules</span>&gt;</span> </div><div class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>../account-email<span class="tag">&lt;/<span class="name">module</span>&gt;</span> </div><div class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>../account-persist<span class="tag">&lt;/<span class="name">module</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;/<span class="name">modules</span>&gt;</span> </div><div class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>account-email和account-persist分别是两个子模块的目录名。</p>
<h2 id="5-2-继承"><a href="#5-2-继承" class="headerlink" title="5.2. 继承"></a>5.2. 继承</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.juvenxu.mvnbook.account<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>account-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;<span class="name">relativePath</span>&gt;</span>../account-parent/pom.xml<span class="tag">&lt;/<span class="name">relativePath</span>&gt;</span> </div><div class="line"> <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></div></pre></td></tr></table></figure>
<p>relativePath表示父模块POM的相对路径，maven首先会根据relativePath检查父pom，如果找不到再从本地仓库找，默认值为 ../pom.xml</p>
<h2 id="5-3-可继承的POM元素"><a href="#5-3-可继承的POM元素" class="headerlink" title="5.3. 可继承的POM元素"></a>5.3. 可继承的POM元素</h2><p>groupId ：项目组 ID ，项目坐标的核心元素；<br><br>version ：项目版本，项目坐标的核心元素； <br><br>description ：项目的描述信息； <br><br>organization ：项目的组织信息； <br><br>inceptionYear ：项目的创始年份； <br><br>url ：项目的 url 地址 <br><br>develoers ：项目的开发者信息； <br><br>contributors ：项目的贡献者信息； <br><br>distributionManagerment ：项目的部署信息； <br><br>issueManagement ：缺陷跟踪系统信息； <br><br>ciManagement ：项目的持续继承信息； <br><br>scm ：项目的版本控制信息； <br><br>mailingListserv ：项目的邮件列表信息； <br><br>properties ：自定义的 Maven 属性； <br><br>dependencies ：项目的依赖配置； <br><br>dependencyManagement ：醒目的依赖管理配置； <br><br>repositories ：项目的仓库配置； <br><br>build ：包括项目的源码目录配置、输出目录配置、插件配置、插件管理配置等； <br><br>reporting ：包括项目的报告输出目录配置、报告插件配置等。    </p>
<h2 id="5-4-依赖管理"><a href="#5-4-依赖管理" class="headerlink" title="5.4. 依赖管理"></a>5.4. 依赖管理</h2><p>父模块pom.xml<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">project</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.x.demo<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>demo-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>demo-parent Maven Webapp<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.apache.org<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line">        </div><div class="line">    <span class="comment">&lt;!-- dependencyManagement 定义的依赖  需要在子pom中声明  不然不会产生效果 --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span>  </div><div class="line">      <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></div><div class="line"> <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></div><div class="line">          </div><div class="line">  <span class="tag">&lt;<span class="name">modules</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">module</span>&gt;</span>../demo-a<span class="tag">&lt;/<span class="name">module</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">module</span>&gt;</span>../demo-b<span class="tag">&lt;/<span class="name">module</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">modules</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>模块a<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">project</span> &gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></div><div class="line">          </div><div class="line">  <span class="tag">&lt;<span class="name">parent</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.x.demo<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>demo-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">relativePath</span>&gt;</span>../demo-parent/pom.xml<span class="tag">&lt;/<span class="name">relativePath</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></div><div class="line">          </div><div class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>demo-a<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>demo-a Maven Webapp<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">        </div><div class="line">  <span class="tag">&lt;<span class="name">properties</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">mail.version</span>&gt;</span>1.4.1<span class="tag">&lt;/<span class="name">mail.version</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></div><div class="line">          </div><div class="line">   <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!-- 声明父pom中的依赖  这样才会真正被使用 --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">                </div><div class="line">        <span class="comment">&lt;!-- 扩展依赖  父pom中并没有声明 不会影响到父POM 和其他模块 --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.mail<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mail<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mail.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></div><div class="line">            </div><div class="line">  <span class="tag">&lt;<span class="name">build</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>demo-a<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">build</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>模块b<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">project</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">parent</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.x.demo<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>demo-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">relativePath</span>&gt;</span>../demo-parent/pom.xml<span class="tag">&lt;/<span class="name">relativePath</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">parent</span>&gt;</span>   </div><div class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>demo-b<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>demo-a Maven Webapp<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </div><div class="line">  <span class="comment">&lt;!-- 没有声明父pom中的依赖  不会被使用 --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">build</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>demo-b<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">build</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>父POM 中使用dependencyManagement 声明的依赖不会给子模块引入依赖， 只会继承这段配置。<br><br>在模块a(demo-a) pom中声明了父pom中junit依赖 在执行的时候才会获得真正的依赖信息。<br><br>模块b(demo-b) pom中没有声明父pom中junit依赖 不会产生实际效果。</p>
<h2 id="5-5-import依赖范围"><a href="#5-5-import依赖范围" class="headerlink" title="5.5. import依赖范围"></a>5.5. import依赖范围</h2><p>import依赖范围只在dependencyManagement元素下才有效，使用该范围的依赖通常指向一个pom，作用是将目标中的dependencyManagement配置导入并合并到当前pom的dependencyManagement元素中。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.juvenxu.mvnbook.account<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>account-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h2 id="5-6-插件管理"><a href="#5-6-插件管理" class="headerlink" title="5.6. 插件管理"></a>5.6. 插件管理</h2><p>使用pluginManagement替换dependencies，同依赖管理<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">pluginManagement</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-source-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">extensions</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">extension</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">id</span>&gt;</span>attach-sources<span class="tag">&lt;/<span class="name">id</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">phase</span>&gt;</span>verify<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">goals</span>&gt;</span></div><div class="line">                            <span class="tag">&lt;<span class="name">goal</span>&gt;</span>jar-no-fork<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;/<span class="name">extension</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">extensions</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">pluginManagement</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>该元素中配置的依赖不会造成实际的插件调用行为，当pom中配置了真正的plugin元素，并且其groupId和artifactId与pluginManagement中配置的插件匹配时，pluginManagement的配置才会影响实际的插件行为。如果子模块不需要使用父模块中pluginManagement配置的插件，可以将其忽略或执行配置以覆盖父模块的pluginManagement配置。</p>
<h2 id="5-7-反应堆"><a href="#5-7-反应堆" class="headerlink" title="5.7. 反应堆"></a>5.7. 反应堆</h2><p>反应堆是指模块组成的一个构建结构，对于单模块的项目，反应堆就是该模块本身，但对于多模块项目来说，反应堆就包含了各模块之间继承和依赖的关系，从而能够自动计算出合理的模块构建顺序。<br><br>Maven实际的构建顺序是这样形成的：Maven读取pom，如果该pom没有依赖模块，那么久构建该模块，否则就先构建其依赖模块，如果该依赖模块还依赖于其他模块，则进一步先构建依赖的依赖。<br><br>一般来说，用户会选择构建整个项目或者选择构建单个模块，但有些时候，用户会想要仅仅构建完整反应堆中 的某些模块。也就是说，需要实时的裁剪反应堆。<br><br>maven提供很多命令行选项支持裁剪反应堆：<br> -am, –also-make同时构建所列模块的依赖模块<br><br> -amd同时构建所依赖于所列模块的模块<br><br> -pl构建指定的模块，用，分开<br><br>-rf从指定的模块回复反应堆</p>

                                            

                                  

                          </div>

                        <!-- 标签/分类/分享 start -->
                        <div class="article-info article-info-index">
                            
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/maven/">maven</a></li></ul>
	</div>


                            

                            
                            
                                <div id="socialShare" style="margin-right:40px;display:none;"></div>
                                <script>
                                    $(function() {
                                        var width = document.body.scrollWidth;
                                        if (width > 550) {
                                            $("#socialShare").css("display", "block");
                                            $("#socialShare").socialShare({
                                                content: 'Nice!不错的资源...',
                                                url: window.location.href,
                                                titile: ''
                                            });
                                        }
                                    });
                                </script>
                                

                            <div class="clearfix"></div>
                        </div> <!-- 标签/分类/分享 end -->
                                          
            </div>

                    
                        
<nav id="article-nav">
  
    <a href="/2017/06/28/oracle-dict/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          oracle数据字典
        
      </div>
    </a>
  
  
    <a href="/2017/04/05/Unhandled event loop exception/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">Eclipse4.3.2 Unhandled event loop exception</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>


                            
                                <!-- 多说评论框 start -->
                                
</article>

<!--

    <div style="width:100%;background-color:#fff;">
        <div id="uyan_frame" style="margin:auto 10px 10px 10px;"></div>
    </div>
    <script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=2017540"></script>
    
-->
<!--

-->

</div>
      <!--
<footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2017 hanzj
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  <script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','m5RW4BUQrJ_r-CYKAksH','2.0.0');
</script>
  </div>
</footer>
-->
    </div>
    

<script src="/js/mobile.js"></script>
<script src="/js/main.js"></script>
<script src="/js/prefixfree.js"></script>





<! -- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<div id="totop" style="position:fixed;bottom:0px;right:10px;cursor: pointer;z-index:9999;opacity: 100%;">
    <a title="返回顶部" style="opacity: 100%;">
        <img src="/img/scrollup.png" />
    </a>
</div>

<script src="/js/totop.js"></script>
<script src="/js/share.js"></script>

  </div>
</body>
</html>
